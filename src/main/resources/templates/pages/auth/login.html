<!DOCTYPE html>
<html lang="id" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Quality Inspector - Masuk</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; }
        
        .hidden { display: none; }
        .flex { display: flex; }
        
        /* Membuat Pattern Grid Halus */
        .bg-grid-slate {
            background-size: 40px 40px;
            background-image: linear-gradient(to right, rgba(148, 163, 184, 0.1) 1px, transparent 1px),
                              linear-gradient(to bottom, rgba(148, 163, 184, 0.1) 1px, transparent 1px);
        }
    </style>
</head>

<!-- UBAH 1: Background dasar Slate-50, tapi ditumpuk dengan elemen dekorasi -->
<body class="bg-slate-50 min-h-screen text-slate-800 antialiased selection:bg-blue-500 selection:text-white relative">

    <!-- UBAH 2: Layer Background Absolut -->
    <div class="fixed inset-0 z-0 pointer-events-none">
        <!-- A. Grid Pattern (Agar tidak polos) -->
        <div class="absolute inset-0 bg-grid-slate [mask-image:linear-gradient(to_bottom,white,transparent)]"></div>
        
        <!-- B. Gradient Mesh (Warna Kebiruan yang lebih kuat) -->
        <!-- Pojok Kiri Atas (Biru Langit) -->
        <div class="absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-sky-200 rounded-full mix-blend-multiply filter blur-[80px] opacity-40 animate-pulse"></div>
        <!-- Pojok Kanan Bawah (Ungu Muda/Biru) -->
        <div class="absolute bottom-[-10%] right-[-10%] w-[500px] h-[500px] bg-blue-200 rounded-full mix-blend-multiply filter blur-[80px] opacity-40 animate-pulse" style="animation-delay: 2s"></div>
        <!-- Tengah (Cyan Pucat) -->
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-cyan-100/50 rounded-full filter blur-[100px]"></div>
    </div>

    <!-- Container Utama -->
    <div class="min-h-screen flex relative items-center justify-center p-4 lg:p-0 z-10">
        
        <!-- Kartu Login (Glassmorphism ditingkatkan shadow-nya) -->
        <div class="flex w-full max-w-6xl bg-white/80 backdrop-blur-xl rounded-[2.5rem] shadow-[0_20px_50px_-12px_rgba(0,0,0,0.1)] border border-white/60 overflow-hidden min-h-[600px]">
            
            <!-- Sisi Kiri (Branding) -->
            <div class="hidden lg:flex lg:w-5/12 relative flex-col justify-between p-12 bg-gradient-to-br from-blue-600 via-blue-500 to-cyan-500 text-white overflow-hidden">
                <!-- Pattern Overlay di sisi biru -->
                <div class="absolute inset-0 opacity-20" style="background-image: radial-gradient(circle at 2px 2px, white 1px, transparent 0); background-size: 24px 24px;"></div>
                
                <!-- Dekorasi Lingkaran -->
                <div class="absolute -right-20 -top-20 w-80 h-80 bg-white/10 rounded-full blur-3xl"></div>
                <div class="absolute -left-20 -bottom-20 w-80 h-80 bg-cyan-400/20 rounded-full blur-3xl"></div>

                <div class="relative z-10">
                    <div class="flex items-center gap-3">
                        <div class="p-2.5 bg-white/20 backdrop-blur-md rounded-xl border border-white/20">
                            <i data-lucide="shield-check" class="w-6 h-6 text-white"></i>
                        </div>
                        <span class="font-bold text-lg tracking-wide">Food Inspector</span>
                    </div>
                </div>

                <div class="relative z-10 space-y-6">
                    <h2 class="text-4xl font-bold leading-tight">Jaminan Higienitas & Kualitas.</h2>
                    <p class="text-blue-50 text-lg leading-relaxed">Platform inspeksi pangan modern untuk memastikan standar keamanan tertinggi.</p>
                </div>

                <div class="relative z-10 flex items-center gap-4 text-sm text-blue-100 font-medium">
                    <div class="flex -space-x-3">
                        <img class="w-8 h-8 rounded-full border-2 border-blue-500 bg-gray-300" src="https://ui-avatars.com/api/?name=A&background=random&color=fff" alt="">
                        <img class="w-8 h-8 rounded-full border-2 border-blue-500 bg-gray-300" src="https://ui-avatars.com/api/?name=B&background=random&color=fff" alt="">
                        <img class="w-8 h-8 rounded-full border-2 border-blue-500 bg-gray-300" src="https://ui-avatars.com/api/?name=C&background=random&color=fff" alt="">
                    </div>
                    <span>Dipercaya oleh profesional QA</span>
                </div>
            </div>

            <!-- Sisi Kanan (Form) -->
            <div class="w-full lg:w-7/12 p-8 lg:p-16 flex flex-col justify-center bg-white/40">
                <div class="max-w-md mx-auto w-full">
                    
                    <!-- Mobile Logo -->
                    <div class="lg:hidden mb-8 flex items-center gap-2">
                        <div class="p-2 bg-blue-600 rounded-lg text-white">
                            <i data-lucide="shield-check" class="w-6 h-6"></i>
                        </div>
                        <span class="font-bold text-xl text-slate-800">Food Inspector</span>
                    </div>

                    <div class="mb-10">
                        <h2 class="text-3xl font-bold text-slate-800 mb-2">Selamat Datang! ðŸ‘‹</h2>
                        <p class="text-slate-500">Silakan masuk ke dashboard inspeksi Anda.</p>
                    </div>

                    <!-- Alerts -->
                    <div th:if="${success}" class="mb-6 p-4 rounded-2xl bg-emerald-50 border border-emerald-100 text-emerald-700 flex items-center gap-3 shadow-sm">
                        <i data-lucide="check-circle-2" class="w-5 h-5 flex-shrink-0"></i>
                        <span th:text="${success}" class="text-sm font-medium"></span>
                    </div>

                    <div th:if="${param.error}" class="mb-6 p-4 rounded-2xl bg-rose-50 border border-rose-100 text-rose-600 flex items-center gap-3 shadow-sm">
                        <i data-lucide="alert-octagon" class="w-5 h-5 flex-shrink-0"></i>
                        <span class="text-sm font-medium">Email atau password salah.</span>
                    </div>

                    <!-- Form -->
                    <form id="loginForm" th:action="@{/auth/login/post}" th:object="${loginForm}" method="post" class="space-y-6" novalidate>
                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" th:if="${_csrf}" />

                        <!-- Email -->
                        <div class="space-y-1.5">
                            <label for="email" class="block text-sm font-semibold text-slate-700">Email Perusahaan</label>
                            <div class="relative group">
                                <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                    <i data-lucide="mail" class="h-5 w-5 text-slate-400 group-focus-within:text-blue-600 transition-colors"></i>
                                </div>
                                <input id="email" type="email" th:field="*{email}"
                                    class="w-full pl-11 pr-4 py-3.5 bg-white border border-slate-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500 outline-none transition-all shadow-sm text-slate-800 placeholder:text-slate-400"
                                    th:classappend="${#fields.hasErrors('email')} ? 'border-rose-500 focus:border-rose-500 focus:ring-rose-500/10' : ''"
                                    placeholder="nama@perusahaan.com">
                            </div>
                            <p id="error-email" class="hidden text-xs text-rose-600 font-medium items-center gap-1 mt-1">
                                <span class="msg" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></span>
                            </p>
                        </div>

                        <!-- Password -->
                        <div class="space-y-1.5">
                            <label for="password" class="block text-sm font-semibold text-slate-700">Password</label>
                            <div class="relative group">
                                <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                    <i data-lucide="lock" class="h-5 w-5 text-slate-400 group-focus-within:text-blue-600 transition-colors"></i>
                                </div>
                                <input id="password" type="password" th:field="*{password}"
                                    class="w-full pl-11 pr-12 py-3.5 bg-white border border-slate-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500 outline-none transition-all shadow-sm text-slate-800 placeholder:text-slate-400"
                                    th:classappend="${#fields.hasErrors('password')} ? 'border-rose-500 focus:border-rose-500 focus:ring-rose-500/10' : ''"
                                    placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                                <button type="button" onclick="togglePassword()" 
                                    class="absolute inset-y-0 right-0 pr-4 flex items-center cursor-pointer text-slate-400 hover:text-blue-600 transition-colors outline-none">
                                    <i id="eye-icon" data-lucide="eye" class="h-5 w-5"></i>
                                    <i id="eye-off-icon" data-lucide="eye-off" class="h-5 w-5 hidden"></i>
                                </button>
                            </div>
                            <p id="error-password" class="hidden text-xs text-rose-600 font-medium items-center gap-1 mt-1">
                                <span class="msg" th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></span>
                            </p>
                        </div>

                        <!-- Actions -->
                        <div class="flex items-center justify-between pt-1">
                            <label class="flex items-center group cursor-pointer select-none">
                                <input type="checkbox" name="remember-me" class="w-4 h-4 text-blue-600 border-slate-300 rounded focus:ring-blue-500 cursor-pointer">
                                <span class="ml-2 text-sm text-slate-600 group-hover:text-slate-900 transition-colors font-medium">Ingat saya</span>
                            </label>
                            <a href="#" class="text-sm font-semibold text-blue-600 hover:text-blue-700 hover:underline">Lupa password?</a>
                        </div>

                        <!-- Button -->
                        <button type="submit" class="group w-full bg-blue-600 hover:bg-blue-700 text-white py-4 rounded-xl transition-all shadow-lg shadow-blue-600/30 flex items-center justify-center gap-2 transform hover:-translate-y-0.5 active:translate-y-0 active:scale-[0.98]">
                            <span class="font-bold tracking-wide">Masuk Dashboard</span>
                            <i data-lucide="arrow-right" class="w-5 h-5 group-hover:translate-x-1 transition-transform"></i>
                        </button>
                    </form>

                    <!-- Footer -->
                    <div class="mt-10 text-center">
                        <p class="text-sm text-slate-500 font-medium">
                            Belum punya akun? 
                            <a th:href="@{/auth/register}" class="text-blue-600 hover:text-blue-700 font-bold ml-1 hover:underline transition-all">
                                Daftar sekarang
                            </a>
                        </p>
                    </div>

                </div>
            </div>
        </div>
        
        <!-- Footer Text -->
        <div class="absolute bottom-4 text-center w-full text-slate-400 text-xs font-medium">
            &copy; 2025 Food Quality Inspector System. All rights reserved.
        </div>

    </div>

    <!-- Script tetap sama -->
    <script>
        lucide.createIcons();
        function togglePassword() {
            const input = document.getElementById('password');
            const eye = document.getElementById('eye-icon');
            const eyeOff = document.getElementById('eye-off-icon');
            if (input.type === 'password') {
                input.type = 'text'; eye.classList.add('hidden'); eyeOff.classList.remove('hidden');
            } else {
                input.type = 'password'; eye.classList.remove('hidden'); eyeOff.classList.add('hidden');
            }
        }
        const form = document.getElementById('loginForm');
        form.addEventListener('submit', function(e) {
            const email = document.getElementById('email');
            const password = document.getElementById('password');
            let hasError = false;
            const showError = (input, msg) => {
                const errP = document.getElementById(`error-${input.id}`);
                input.classList.add('border-rose-500', 'focus:border-rose-500', 'focus:ring-rose-500/10');
                input.classList.remove('border-slate-200');
                errP.innerText = msg;
                errP.classList.remove('hidden');
                errP.classList.add('flex');
                hasError = true;
            };
            const clearError = (input) => {
                if(input.value.trim() !== "") {
                    const errP = document.getElementById(`error-${input.id}`);
                    input.classList.remove('border-rose-500', 'focus:border-rose-500', 'focus:ring-rose-500/10');
                    input.classList.add('border-slate-200');
                    errP.classList.add('hidden');
                    errP.classList.remove('flex');
                }
            };
            if (!email.value.trim()) showError(email, 'Email wajib diisi');
            else clearError(email);
            if (!password.value) showError(password, 'Password wajib diisi');
            else clearError(password);
            if (hasError) e.preventDefault();
        });
        ['email', 'password'].forEach(id => {
            document.getElementById(id).addEventListener('input', function() {
                if(this.classList.contains('border-rose-500')) {
                    this.classList.remove('border-rose-500', 'focus:border-rose-500', 'focus:ring-rose-500/10');
                    this.classList.add('border-slate-200');
                    document.getElementById(`error-${id}`).classList.add('hidden');
                }
            });
        });
    </script>
</body>
</html>